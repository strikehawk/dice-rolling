export class DiceExpressionBase {
    constructor(expression) {
        this._value = 0;
        if (!expression) {
            throw new Error("Expression cannot be empty.");
        }
        this.expression = expression;
        this._parse(expression);
    }
    get value() {
        return this._value;
    }
    get dice() {
        return this._dice;
    }
    reset() {
        this._value = 0;
        this._dice = [];
    }
    _rollDie(sides) {
        return Math.floor(Math.random() * Math.floor(sides)) + 1;
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGljZS1leHByZXNzaW9uLWJhc2UuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi9saWIvcGFydHMvZGljZS1leHByZXNzaW9uLWJhc2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBRUEsTUFBTSxPQUFnQixrQkFBa0I7SUFhcEMsWUFBWSxVQUFrQjtRQVZwQixXQUFNLEdBQVcsQ0FBQyxDQUFDO1FBV3pCLElBQUksQ0FBQyxVQUFVLEVBQUU7WUFDYixNQUFNLElBQUksS0FBSyxDQUFDLDZCQUE2QixDQUFDLENBQUM7U0FDbEQ7UUFFRCxJQUFJLENBQUMsVUFBVSxHQUFHLFVBQVUsQ0FBQztRQUM3QixJQUFJLENBQUMsTUFBTSxDQUFDLFVBQVUsQ0FBQyxDQUFDO0lBQzVCLENBQUM7SUFoQkQsSUFBVyxLQUFLO1FBQ1osT0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDO0lBQ3ZCLENBQUM7SUFHRCxJQUFXLElBQUk7UUFDWCxPQUFPLElBQUksQ0FBQyxLQUFLLENBQUM7SUFDdEIsQ0FBQztJQWFNLEtBQUs7UUFDUixJQUFJLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQztRQUNoQixJQUFJLENBQUMsS0FBSyxHQUFHLEVBQUUsQ0FBQztJQUNwQixDQUFDO0lBSVMsUUFBUSxDQUFDLEtBQWE7UUFDNUIsT0FBTyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxNQUFNLEVBQUUsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQzdELENBQUM7Q0FDSiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IERpY2VFeHByZXNzaW9uIH0gZnJvbSBcIi4vcm9sbC1wYXJ0XCI7XHJcblxyXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgRGljZUV4cHJlc3Npb25CYXNlIGltcGxlbWVudHMgRGljZUV4cHJlc3Npb24ge1xyXG4gICAgcHVibGljIHJlYWRvbmx5IGV4cHJlc3Npb246IHN0cmluZztcclxuXHJcbiAgICBwcm90ZWN0ZWQgX3ZhbHVlOiBudW1iZXIgPSAwO1xyXG4gICAgcHVibGljIGdldCB2YWx1ZSgpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl92YWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgX2RpY2U6IG51bWJlcltdO1xyXG4gICAgcHVibGljIGdldCBkaWNlKCk6IG51bWJlcltdIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGljZTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdHJ1Y3RvcihleHByZXNzaW9uOiBzdHJpbmcpIHtcclxuICAgICAgICBpZiAoIWV4cHJlc3Npb24pIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRXhwcmVzc2lvbiBjYW5ub3QgYmUgZW1wdHkuXCIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5leHByZXNzaW9uID0gZXhwcmVzc2lvbjtcclxuICAgICAgICB0aGlzLl9wYXJzZShleHByZXNzaW9uKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgcHVibGljIGFic3RyYWN0IHJvbGwoKTogdm9pZDtcclxuXHJcbiAgICBwdWJsaWMgcmVzZXQoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5fdmFsdWUgPSAwO1xyXG4gICAgICAgIHRoaXMuX2RpY2UgPSBbXTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgcHJvdGVjdGVkIGFic3RyYWN0IF9wYXJzZShleHByZXNzaW9uOiBzdHJpbmcpOiB2b2lkO1xyXG5cclxuICAgIHByb3RlY3RlZCBfcm9sbERpZShzaWRlczogbnVtYmVyKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogTWF0aC5mbG9vcihzaWRlcykpICsgMTtcclxuICAgIH1cclxufSJdfQ==